var t,e,r,n,a,l,c,s,o,i,f,d,v,u,h,L,m,g,y,A,k,x,C,b;t=document.querySelector(".start"),e=document.querySelector(".restart"),r=document.querySelector(".game-score"),n=document.querySelectorAll(".field-cell"),a=document.querySelector(".message-start"),l=document.querySelector(".message-lose"),c=document.querySelector(".message-win"),s=0,o={},i=function(t){return o[t]},f=function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o[t]=e},d=function(t){for(var e=Math.floor(Math.random()*t.length),r=Math.floor(Math.random()*t.length);e===r;)r=Math.floor(Math.random()*t.length);return[e,r]},v=function(t){return Array.from(t.classList).some(function(t){return t.startsWith("field-cell--")})},u=function(t){var e=Array.from(t.classList).join(" ").split("--");return e[e.length-1]},h=function(){for(var t=[],e=0;e<n.length;e++)v(n[e])||t.push(e);if(t.length>0){var r=t[Math.floor(Math.random()*t.length)],a=.1>Math.random()?4:2;n[r].classList.add("field-cell--".concat(a)),n[r].textContent="".concat(a)}},L=function(t){for(var e=0;e<t.length;e++)if(!v(t[e]))return!1;return!0},m=function(t){for(var e=0;e<t.length;e++){var r=t[e];if(v(r)){var n=u(r);if(e-4>=0){var a=t[e-4];if(v(a)&&u(a)===n)return!0}if(e+4<t.length){var l=t[e+4];if(v(l)&&u(l)===n)return!0}if(e%4!=0){var c=t[e-1];if(v(c)&&u(c)===n)return!0}if((e+1)%4!=0){var s=t[e+1];if(v(s)&&u(s)===n)return!0}}}return!1},g=function(t){Array.from(c.classList).includes("hidden")&&L(t)&&!m(t)&&l.classList.remove("hidden")},y=function(t){2*t==2048&&c.classList.remove("hidden")},A=function(t){s+=2*t,r.textContent="",r.textContent="".concat(s)},k=function(t){for(var e=!1,r=0;r<t.length;r++){var n=t[r];if(v(n)&&r-4>=0)for(var a=r-4,l=u(n);a>=0;){if(v(t[a])&&!i(a)){var c=Array.from(t[a].classList),s=Array.from(t[a+4].classList);if(c[c.length-1]!==s[s.length-1])break}else if(void 0!==i(a))break;for(var d=Array.from(t[a+4].classList),L=0;L<d.length;L++){var m=d[L];"field-cell"!==m&&t[a+4].classList.remove(m)}if(t[a+4].textContent="",t[a].classList.contains("field-cell--".concat(l))){t[a].classList.remove("field-cell--".concat(l)),t[a].classList.add("field-cell--".concat(2*l)),t[a].textContent="".concat(2*l),f(a),A(l),e=!0,y(l);break}t[a].classList.add("field-cell--".concat(l)),t[a].textContent="".concat(l),e=!0,a-=4}}e&&h(),g(t),o={}},x=function(t){for(var e=!1,r=t.length-1;r>=0;r--){var a=t[r];if(v(a)&&r+4<n.length)for(var l=r+4,c=u(a);l<n.length;){if(v(t[l])&&!i(l)){var s=Array.from(t[l].classList),d=Array.from(t[l-4].classList);if(s[s.length-1]!==d[d.length-1])break}else if(void 0!==i(l))break;for(var L=Array.from(t[l-4].classList),m=0;m<L.length;m++){var k=L[m];"field-cell"!==k&&t[l-4].classList.remove(k)}if(t[l-4].textContent="",t[l].classList.contains("field-cell--".concat(c))){t[l].classList.remove("field-cell--".concat(c)),t[l].classList.add("field-cell--".concat(2*c)),t[l].textContent="".concat(2*c),f(l),A(c),e=!0,y(c);break}t[l].classList.add("field-cell--".concat(c)),t[l].textContent="".concat(c),e=!0,l+=4}}e&&h(),g(t),o={}},C=function(t){for(var e=[0,4,8,12],r=!1,n=0;n<t.length;n++){var a=t[n];if(v(a))for(var l=n-1,c=u(a);!e.includes(l+1)&&!e.includes(n);){if(v(t[l])&&!i(l)){var s=Array.from(t[l].classList),d=Array.from(t[l+1].classList);if(s[s.length-1]!==d[d.length-1])break}else if(void 0!==i(l))break;for(var L=Array.from(t[l+1].classList),m=0;m<L.length;m++){var k=L[m];"field-cell"!==k&&t[l+1].classList.remove(k)}if(t[l+1].textContent="",t[l].classList.contains("field-cell--".concat(c))){t[l].classList.remove("field-cell--".concat(c)),t[l].classList.add("field-cell--".concat(2*c)),t[l].textContent="".concat(2*c),f(l),A(c),r=!0,y(c);break}t[l].classList.add("field-cell--".concat(c)),t[l].textContent="".concat(c),r=!0,l-=1}}r&&h(),g(t),o={}},b=function(t){for(var e=[3,7,11,15],r=!1,n=t.length-1;n>=0;n--){var a=t[n];if(v(a))for(var l=n+1,c=u(a);!e.includes(l-1)&&!e.includes(n);){if(v(t[l])&&!i(l)){var s=Array.from(t[l].classList),d=Array.from(t[l-1].classList);if(s[s.length-1]!==d[d.length-1])break}else if(void 0!==i(l))break;for(var L=Array.from(t[l-1].classList),m=0;m<L.length;m++){var k=L[m];"field-cell"!==k&&t[l-1].classList.remove(k)}if(t[l-1].textContent="",t[l].classList.contains("field-cell--".concat(c))){t[l].classList.remove("field-cell--".concat(c)),t[l].classList.add("field-cell--".concat(2*c)),t[l].textContent="".concat(2*c),f(l),A(c),r=!0,y(c);break}t[l].classList.add("field-cell--".concat(c)),t[l].textContent="".concat(c),r=!0,l+=1}}r&&h(),g(t),o={}},t.addEventListener("click",function(){t.classList.add("hidden"),e.classList.remove("hidden");var r=d(n);n[r[0]].classList.add("field-cell--2"),n[r[0]].textContent="2",n[r[1]].classList.add("field-cell--2"),n[r[1]].textContent="2",a.classList.add("hidden")}),e.addEventListener("click",function(){location.reload()}),document.addEventListener("keydown",function(t){c.classList.contains("hidden")&&("ArrowUp"===t.key?k(n):"ArrowDown"===t.key?x(n):"ArrowLeft"===t.key?C(n):"ArrowRight"===t.key&&b(n))});
//# sourceMappingURL=index.2d05f880.js.map
